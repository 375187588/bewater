#!/bin/sh
STAGED_FILES=$(find ./ -name *.lua)
#STAGED_FILES=$(git status -s | grep "[M|??].*lua$" | awk '{printf $2 "\n"}')
if [[ "$STAGED_FILES" = "" ]]; then
    exit 0
fi
PASS=true
echo -e "LUACHECK..."
# Check for luacheck
which luacheck &> /dev/null
if [[ "$?" == 1 ]]; then
    echo -e "\e[1;31mplease install luacheck\e[0m"
    exit 1
fi
luacheck --config .luacheckrc ./
if [[ "$?" == 1 ]]; then
    echo -e "\e[1;31mCOMMIT FAILED\e[0m"
    exit 1
else
    echo -e "\e[1;32mCOMMIT SUCCESSED\e[0m"
    exit 0
fi
